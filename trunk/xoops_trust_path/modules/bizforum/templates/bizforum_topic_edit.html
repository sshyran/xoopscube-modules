<{if $actionForm->hasError()}>
  <ul class="error">
    <{foreach item=message from=$actionForm->getErrorMessages()}>
      <li><{$message|xoops_escape}></li>
    <{/foreach}>
  </ul>
<{/if}>
<form action="index.php?action=TopicEdit" method="post">
  <table class="outer" summary="">
    <caption>
      <{if $actionForm->get('topic_id')}>
        <{$smarty.const._MD_BIZFORUM_LANG_TOPIC_EDIT}>
      <{else}>
        <{$smarty.const._MD_BIZFORUM_LANG_ADD_A_NEW_TOPIC}>
      <{/if}>
   </caption>
   <tbody>
      <tr>
        <th class="head"><{$smarty.const._MD_BIZFORUM_LANG_TOPIC_TITLE}></th>
        <td class="<{cycle values="odd,even"}>">
          <{xoops_input type=text name=topic_title value=$actionForm->get('topic_title') size=15 maxlength=255}>
        </td>
      </tr>
      <tr>
        <th class="head"><{$smarty.const._MD_BIZFORUM_LANG_CAT_NAME}></th>
        <td class="<{cycle values="odd,even"}>">
        	<select name="cat_id">
          <{xcatsvc_catselect tree=$cat selectedValue=$object->get('cat_id')}>
          </select>
        </td>
      </tr>
      <{if ! $xoops_userid}>
      <tr>
        <th class="head"><{$smarty.const._MD_BIZFORUM_LANG_GUEST_NAME}></th>
        <td class="<{cycle values="odd,even"}>">
          <{xoops_input type=text name=guest_name value=$actionForm->get('guest_name') size=15 maxlength=16}>
        </td>
      </tr>
      <{/if}>
      <tr>
        <th class="head"><{$smarty.const._MD_BIZFORUM_LANG_BODYTEXT}></th>
        <td class="<{cycle values="odd,even"}>">
          <{xoops_textarea type=text name=bodytext value=$actionForm->get('bodytext')}>
        </td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td class="foot" colspan="2">
          <{xoops_token form=$actionForm}>
          <{xoops_input type=hidden name=topic_id value=$actionForm->get('topic_id')}>
          <{xoops_input type=hidden name=uid value=$actionForm->get('uid')}>
          <input type="submit" value="<{$smarty.const._SUBMIT}>" />
          <input type="submit" value="<{$smarty.const._CANCEL}>" name="_form_control_cancel" />
        </td>
      </tr>
    </tfoot>
  </table>
</form>
