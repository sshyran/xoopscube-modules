<div class="bizpoll">
	<!-- Main -->
	<div class="item">
		<div class="itemHead">
			<{if $useCat==true}>
				<{foreach item=catPath from=$catPathArr.cat_title name=cat}>
					<{$catPath}> &raquo; 
				<{/foreach}>
				<a href="./index.php?action=EnqList&amp;cat_id=<{$object->getShow('cat_id')}>"><{$catTitle}></a> : 
			<{/if}>
			<h1 class="itemTitle">
				<{$object->getShow('title')}>
			</h1>
		</div>
		<div class="itemInfo">
	  	<{if $object->getShow('uid') == $xoops_userid}>
				<a href="./index.php?action=EnqEdit&amp;enq_id=<{$object->getShow('enq_id')}>"><img src="<{$xoops_url}>/images/icons/edit.gif" alt="<{$smarty.const._EDIT}>" /></a>
	      <a href="./index.php?action=EnqDelete&amp;enq_id=<{$object->getShow('enq_id')}>"><img src="<{$xoops_url}>/images/icons/delete.gif" alt="<{$smarty.const._DELETE}>" /></a>
	    <{/if}>
			<span class="itemPostDate">
				<{$object->get('pub_unixtime')|xoops_formattimestamp:l}> &nbsp;
			</span>
			<span class="itemStats">
				by: <a href="./index.php?action=EnqList&amp;uid=<{$object->getShow('uid')}>"><{$object->getShow('uid')|xoops_user:"uname"}></a>
			</span>
		</div>
		<div class="itemBody">
			<{if $useEditor=="fckeditor"}>
				<{$object->get('description')}>
			<{else}>
				<{$object->getShow('description')}>
			<{/if}>
		</div>
		<div class="itemFoot">
			<span class="itemStats">
			</span>
		</div>
	</div>

	<div class="bizpollPoll">
		<h2><{$smarty.const._MD_BIZPOLL_LANG_POLL}></h2>
		<{if $allowShowResult==true}>
		<ul>
			<li><a href="./index.php?action=PollDetail&amp;enq_id=<{$object->getShow('enq_id')}>"><{$smarty.const._MD_BIZPOLL_LANG_SHOW_DETAIL_POLL}></a></li>
		</ul>
		<{/if}>
	  <{if $object->allowAddChoice()==true && $object->checkEnd()==true}>
			<a href="./index.php?action=ChoiceEdit&amp;enq_id=<{$object->getShow('enq_id')}>"><img src="<{$xoops_url}>/modules/<{$dirname}>/images/addchoice.png" alt="<{$smarty.const._ADD}>" /></a>
		<{/if}>
		<!-- Choices List -->
		<{if $actionForm->hasError()}>
			<div class="msgError">
		  <ul class="error">
		    <{foreach item=message from=$actionForm->getErrorMessages()}>
		      <li><{$message|xoops_escape}></li>
		    <{/foreach}>
		  </ul>
		  </div>
		<{/if}>
		<{if $object->checkEnd()==true}>
			<form action="index.php?action=PollEdit" method="post">
		    <{xoops_token form=$actionForm}>
				<{if $object->mMyPoll->get('poll_id')}>
					<div class="msgInfo"><{$smarty.const._MD_BIZPOLL_LANG_POLLED}></div>
					<{xoops_input type=hidden name=poll_id value=$object->mMyPoll->get('poll_id')}>
				<{else}>
					<{xoops_input type=hidden name=poll_id value=0}>
				<{/if}>
				<{xoops_input type=hidden name=enq_id value=$actionForm->get('enq_id')}>
				<dl class="bizpollChoice">
					<{if $object->get('type')==0}>
						<{foreach item=choiceR from=$object->mChoice}>
						<dt><label>
							<input type="radio" name="choice_id" id="legacy_xoopsform_choice_id" value="<{$choiceR->getShow('choice_id')}>"<{if $choiceR->mIsPolled==true}> checked="checked"<{/if}>>
							<{$choiceR->getShow('title')}><{if $allowShowResult==true}> (<{$smarty.const._MD_BIZPOLL_LANG_POLL_COUNT}>: <{$choiceR->mPollCount}>)<{/if}></label>
						</dt>
						<dd><{$choiceR->getShow('description')}></dd>
						<{/foreach}>
					
					<{elseif $object->get('type')==1}>
						<{foreach item=choiceC from=$object->mChoice}>
						<dt><label>
							<input type="checkbox" name="choice_id[]" id="legacy_xoopsform_choice_id[]" value="<{$choiceC->getShow('choice_id')}>"<{if $choiceC->mIsPolled==true}> checked="checked"<{/if}>>
							<{$choiceC->getShow('title')}><{if $allowShowResult==true}> (<{$smarty.const._MD_BIZPOLL_LANG_POLL_COUNT}>: <{$choiceR->mPollCount}>)<{/if}></label>
						</dt>
						<dd><{$choiceC->getShow('description')}></dd>
						<{/foreach}>
					<{/if}>
				</dl>
				<{if ! $xoops_userid}>
				<{$smarty.const._MD_BIZPOLL_LANG_UID}><br />
				<{xoops_input type=text name=name value=$actionForm->get('name') size=30 maxlength=16}><br />
				<{/if}>
				<{$smarty.const._MD_BIZPOLL_LANG_COMMENT}><br />
				<{xoops_textarea type=text name=comment value=$actionForm->get('comment')}>
		    <input type="submit" value="<{$smarty.const._SUBMIT}>" />
			</form>
		<{else}>
			<dl>
				<{foreach item=choice from=$object->mChoice}>
				<dt>
					<{$choice->getShow('title')}>
					<{if $allowShowResult==true}> (<{$smarty.const._MD_BIZPOLL_LANG_POLL_COUNT}>: <{$choice->mPollCount}>) <{/if}>
					<{if $choice->mIsPolled==true}><{$smarty.const._MD_BIZPOLL_LANG_POLLED}><{/if}>
				</dt>
				<dd><{$choice->getShow('description')}></dd>
				<{/foreach}>
			</dl>
			<p>
				<{if $useEditor=="fckeditor"}>
					<{$object->mMyPoll->get('description')}>
				<{else}>
					<{$object->mMyPoll->getShow('description')}>
				<{/if}>
			</p>
		<{/if}>
	</div>
</div>
