<div>
<a href="<{$xoops_url}>/userinfo.php?uid=<{$actionForm->get('uid')|xoops_escape}>"><{$smarty.const._MD_USER_LANG_PROFILE}></a>
&nbsp;<span style="font-weight:bold;">&raquo;&raquo;</span>&nbsp;<{$smarty.const._MD_USER_LANG_EDITPROFILE}>
</div>

<{if $actionForm->hasError()}>
<div class="errorMsg">
  <ul>
    <{foreach item=message from=$actionForm->getErrorMessages()}>
      <li><{$message}></li>
    <{/foreach}>
  </ul>
</div>
<{/if}>

<form action="#" method="post">
<{xoops_token form=$actionForm}>
<{xoops_input name=uid type=hidden value=$actionForm->get('uid')}>
<table class="outer" cellspacing="1" width="100%">
  <tr>
    <th colspan="2"><{$smarty.const._MD_USER_LANG_EDITPROFILE}></th>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_NICKNAME}></td>
    <td class="<{cycle values="odd,even"}>"><{$thisUser->getShow('uname')}></td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_NAME}></td>
    <td class="<{cycle values="odd,even"}>">
      <{xoops_input name=name size=30 maxlength=60 value=$actionForm->get('name')}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_EMAIL}></td>
    <td class="<{cycle values="odd,even"}>">
      <{if $allow_chgmail}>
        <{xoops_input name=email size=30 maxlength=60 value=$actionForm->get('email')}><br />
      <{else}>
        <{$thisUser->getShow('email')}><br />
      <{/if}>
      <label><{xoops_input type=checkbox name=user_viewemail value=1 default=$actionForm->get('user_viewemail')}><{$smarty.const._MD_USER_LANG_USER_VIEWEMAIL}></label>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_WEBSITE}></td>
    <td class="<{cycle values="odd,even"}>">
      <{xoops_input name=url size=30 maxlength=100 value=$actionForm->get('url')}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_TIMEZONE_OFFSET}></td>
    <td class="<{cycle values="odd,even"}>">
      <select name="timezone_offset">
        <{xoops_optionsArray id=timezone_offset label=zone_name value=offset from=$timezones default=$actionForm->get('timezone_offset')}>
      </select>
    </td>
  </tr>

  <!-- XCL2.2 TEST-->
	<{foreach item=def from=$definitions}>
	<{assign var=field_name value=$def.field_name}>
	<tr>
    <td class="head"><{$def.label}></td>
    <td class="<{cycle values="odd,even"}>">
    	<{if $def.type=="string"}>
      <{xoops_input type=text name=profile[$field_name] value=$data.$field_name  size=40 maxlength=255}>
      <{elseif $def.type=="int"}>
      <{xoops_input type=text name=profile[$field_name] value=$data.$field_name size=15 maxlength=11}>
      <{elseif $def.type=="text"}>
      <{xoops_dhtmltarea type=text name=profile[$field_name] value=$data.$field_name}>
      <{elseif $def.type=="date"}>
      <{elseif $def.type=="checkbox"}>
      <{xoops_input type=checkbox name=profile[$field_name] value=1 default=$data.$field_name}>
      <{elseif $def.type=="selectbox"}>
      <select name="profile[<{$field_name}>]" id="legacy_xoopsform_profile[<{$field_name}>]">
        <{foreach item=option from=$def.options}>
      	<option value="<{$option}>"<{if $data.$field_name==$option}> selected="selected"<{/if}>><{$option}></option>
	    <{/foreach}>
      </select>
      <{/if}>
    </td>
  </tr>
	<{/foreach}>
  <!--
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_USER_ICQ}></td>
    <td class="<{cycle values="odd,even"}>">
      <{xoops_input name=user_icq size=15 maxlength=15 value=$actionForm->get('user_icq')}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_USER_AIM}></td>
    <td class="<{cycle values="odd,even"}>">
      <{xoops_input name=user_aim size=18 maxlength=18 value=$actionForm->get('user_aim')}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_USER_YIM}></td>
    <td class="<{cycle values="odd,even"}>">
      <{xoops_input name=user_yim size=25 maxlength=25 value=$actionForm->get('user_yim')}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_USER_MSNM}></td>
    <td class="<{cycle values="odd,even"}>">
      <{xoops_input name=user_msnm size=30 maxlength=100 value=$actionForm->get('user_msnm')}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_USER_FROM}></td>
    <td class="<{cycle values="odd,even"}>">
      <{xoops_input name=user_from size=30 maxlength=100 value=$actionForm->get('user_from')}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_USER_OCC}></td>
    <td class="<{cycle values="odd,even"}>">
      <{xoops_input name=user_occ size=30 maxlength=100 value=$actionForm->get('user_occ')}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_USER_INTREST}></td>
    <td class="<{cycle values="odd,even"}>">
      <{xoops_input name=user_intrest size=30 maxlength=150 value=$actionForm->get('user_intrest')}>
    </td>
  </tr>
  -->
  <!-- XCL2.2 TEST END-->
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_USER_SIG}></td>
    <td class="<{cycle values="odd,even"}>">
      <{xoops_dhtmltarea name=user_sig value=$actionForm->get('user_sig')}><br />
      <label><{xoops_input type=checkbox name=attachsig value=1 default=$actionForm->get('attachsig')}><{$smarty.const._MD_USER_LANG_ATTACHSIG}></label>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_UMODE}></td>
    <td class="<{cycle values="odd,even"}>">
      <{html_options name=umode options=$umodeOptions selected=$actionForm->get('umode')}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_UORDER}></td>
    <td class="<{cycle values="odd,even"}>">
      <{html_options name=uorder options=$uorderOptions selected=$actionForm->get('uorder')}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_NOTIFY_METHOD}></td>
    <td class="<{cycle values="odd,even"}>">
      <{html_options name=notify_method options=$notify_methodOptions selected=$actionForm->get('notify_method')}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_NOTIFY_MODE}></td>
    <td class="<{cycle values="odd,even"}>">
      <{html_options name=notify_mode options=$notify_modeOptions selected=$actionForm->get('notify_mode')}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_BIO}></td>
    <td class="<{cycle values="odd,even"}>">
      <{xoops_textarea name=bio value=$actionForm->get('bio') rows=5 cols=50}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_PASSWORD}><br />
    <{$smarty.const._MD_USER_LANG_TYPEPASSTWICE}></td>
    <td class="<{cycle values="odd,even"}>">
      <{xoops_input type=password name=pass size=10 maxlength=32 value=$actionForm->get('pass')}>
      <{xoops_input type=password name=vpass size=10 maxlength=32 value=$actionForm->get('vpass')}>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_USERCOOKIE}></td>
    <td class="<{cycle values="odd,even"}>">
      <label><{xoops_input type=radio name=usercookie value=1 default=$actionForm->get('usercookie')}><{$smarty.const._YES}></label>
      <label><{xoops_input type=radio name=usercookie value=0 default=$actionForm->get('usercookie')}><{$smarty.const._NO}></label>
    </td>
  </tr>
  <tr>
    <td class="head"><{$smarty.const._MD_USER_LANG_USER_MAILOK}></td>
    <td class="<{cycle values="odd,even"}>">
      <label><{xoops_input type=radio name=user_mailok value=1 default=$actionForm->get('user_mailok')}><{$smarty.const._YES}></label>
      <label><{xoops_input type=radio name=user_mailok value=0 default=$actionForm->get('user_mailok')}><{$smarty.const._NO}></label>
    </td>
  </tr>
  <tr>
    <td class="head">&nbsp;</td>
    <td class="<{cycle values="odd,even"}>">
      <input type="submit" value="<{$smarty.const._MD_USER_LANG_SAVECHANGES}>" />
    </td>
  </tr>
</table>
</form>
