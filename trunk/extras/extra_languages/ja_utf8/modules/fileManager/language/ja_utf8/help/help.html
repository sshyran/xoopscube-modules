<h4>File Manager利用ガイド</h4>
<p>File Manager (ファイルマネージャー)は、アップロードしたファイルを管理するモジュールです。</p>
<p>
管理画面専用のモジュールで、サイト管理者が利用することを目的としています。ヘルプをよく読んでお使い下さい。
</p>
<h5>ご利用条件</h5>
<ul>
  <li>XOOPS Cube Legacy 専用モジュールです。従来のXOOPS 2環境では動作しません。</li>
  <li>当モジュールを使う事で利用者に損害が生じても作者は一切責任を負いません。</li>
</ul>

<h4>概要</h4>
<ul>
  <li>SWFアップローダーを利用して複数のファイルをまとめてアップロード可能です。</li>
  <li>フォルダの作成・削除に対応しています。</li>
  <li>設置サーバーの利用環境により利用できない場合があります。</li>
</ul>

<h4>特徴</h4>

<ul>
  <li>XOOPS Cube Legacy に完全対応しています。</li>
  <li>複数のファイルのアップロードに対応しています。</li>
  <li>ビューワーを組み込んでおり、画像を見たり、各種動画・音楽を再生して見ることが出来ます。</li>
  <li>SWFアップローダのディレクトリにアクセス制限を行う為のhtaccessのサンプルを組成します。</li>
</ul>


<h4>一般設定</h4>
<p>
モジュールを使い始める前に、初期設定を行う必要があります。
</p>
<ul>
  <li>アップロードするデフォルトのパス<br />アップロードする標準のフォルダ名を指定します。指定するフォルダは、XOOPS設置バス/uploads/より下のディレクトリが指定可能です。指定がない場合は、XOOPS設置バス/uploads/ になります。<br />
  XOOPS設置バス/uploads/以外の設定は無効です。XOOPS設置バス/myimage/等は指定出来ません。</li>
  <li>サムネイルサイズ<br />ファイルをリスト表示した時のサムネイルサイズを指定します。</li>
  <li>システム画像の非表示<br />イメージマネージャーやアバターなどシステムで使っている画像を表示しません。非表示を推奨します。デフォルトは「いいえ」です。</li>
  <li>アップローダーのデバックをオン<br />SWFUploadのデバッグ画面を有効にします。アップロード時のエラー解析に役立ちます。デフォルトは「いいえ」です。</li>
  <li>フォルダの操作をサポート<br />「はい」を選ぶとフォルダの操作を可能にします。デフォルトは「いいえ」です。</li>
  <li>アップロード可能なファイルの拡張子<br />アップロードを許可するファイルの拡張子を '|' 区切りで指定します。拡張子は、全て小文字で入力して下さい。<br />デフォルトは、gif|jpg|jpeg|png|avi|mov|wmv|mp3|mp4|flv|doc|xls|ods|odt|pdf です。</li>
  <li>【ffmpeg用設定】ffmpegを利用する<br />ffmpegを利用する場合は、はいを選択して下さい。ffmpegは、サーバー側が対応している必要があります。<br />お使いのサーバーに対応したバイナリを設置するか、ビルドして下さい。</li>
  <li>【ffmpeg用設定】コマンド検索パス<br />ffmpegの実行ファイルへパスが通っていない場合は、設置パスを指定します。<br />(例: /usr/local/bin:/usr/bin)</li>
  <li>【ffmpeg用設定】スクリーンショットの時間<br />動画ファイルからスクリーンショットを撮る時間を動画の先頭からの時間（秒）を指定します。</li>
  <li>【ffmpeg用設定】FLV変換のファイル形式<br />FLV変換可能な動画ファイルの拡張子を '|' 区切りで指定します。拡張子は、全て小文字で入力して下さい。<br />お使いのffmpegによって変換出来るファイル形式が異なります。<br />デフォルトは、flv|avi|mwv|mov|mpg|qt|mov|3gp|3gp2|mp4 です。</li>
</ul>

<p><b>一般設定が終わったら、動作環境の確認を行って下さい。</b></p>
<p><font color="#F00000">
動作環境の確認では、使用しているライブラリのファイルのチェックを行います。<br />
SWFUpload(FLASH)を使ったアップロードは、外部からのアクセスが可能になります。<br />
SWFUploadを設置しているフォルダへ、htaccessを設置してアクセス制限を行って下さい。<br />
動作環境の確認画面では、管理者のIPアドレスのみ利用できるhtaccessを組成しています。お使いのサーバーに合わせて設置してください。<br />
複数の管理者で利用したい場合は、管理者のIPアドレスを追加すると良いでしょう。<br />
</font></p>

<h4>使い方</h4>

<h5>フォルダ名とファイル名について</h5>
<p>ファイルマネージャーで利用できるフォルダ名とファイル名は、半角英数字のみ（半角英数字と-~_）をサポートしています。<br /><font color="#F00000">日本語のファイル名の操作に関しては対応していません。</font></p>


<h5>フォルダごとの設定</h5>
<p>ファイルマネージャーで操作出来るフォルダの属性は<font color="#F00000">0777</font>に固定されています。モジュール側で画像を管理している場合は、フォルダを削除されない為に0755,0775に設定しておくと良いでしょう。</p>
<p>ファイルのアップロードは、0755,0775,0777の場合にアップロードが可能になります。</p>
<h5>フォルダのパーミッションと機能の一覧</h5>
<p>フォルダのパーミッションと機能は以下のようになっています。誤って削除しないようにFTP等で設定してください。</p>
<table border="1" cellpadding="5">
  <tr>
    <td><div align="center">パーミッション</div></td>
    <td><div align="center">閲覧</div></td>
    <td><div align="center">アップロード</div></td>
    <td><div align="center">ファイル削除</div></td>
    <td><div align="center">フォルダ作成</div></td>
    <td><div align="center">フォルダ削除</div></td>
  </tr>
  <tr>
    <td><div align="center">0777</div></td>
    <td><div align="center">OK</div></td>
    <td><div align="center">OK</div></td>
    <td><div align="center">OK</div></td>
    <td><div align="center">OK</div></td>
    <td><div align="center">OK</div></td>
  </tr>
  <tr>
    <td><div align="center">0775,0755</div></td>
    <td><div align="center">OK</div></td>
    <td><div align="center">OK</div></td>
    <td><div align="center">---</div></td>
    <td><div align="center">---</div></td>
    <td><div align="center">---</div></td>
  </tr>
  <tr>
    <td><div align="center">その他</div></td>
    <td><div align="center">OK</div></td>
    <td><div align="center">---</div></td>
    <td><div align="center">---</div></td>
    <td><div align="center">---</div></td>
    <td><div align="center">---</div></td>
  </tr>
</table>


<h4>ffmpegについて</h4>
<p>
サーバーサイドで動画の変換や画像の切り出しが可能になるライブラリです。
</p>
<ul>
  <li>ffmpgを利用する場合は、サーバー側の設定が必要になります。</li>
  <li>ffmpgを使った場合の動作を保障するものではありません。</li>
  <li>ffmpgは、バイナリでの配布は許可されていないので、別途ご用意下さい。</li>
  <li>ffmpgを使った操作は、ffmpgのコンパイルやサーバの環境へ依存します。</li>
  <li>動画変換を使うと共有のレンタルサーバなどではサーバへの負荷が高くなるので、専用のサーバでお使い下さい。</li>
</ul>


<h4>注意事項</h4>
<ul>
  <li>XOOPSおよびImpressには、対応していません。また今後も対応する予定はありません。</li>
  <li>ファイルのアップロードは、アップロード画面を開いて３０分以上過ぎるとアップロードが出来ません。<br />再度画面をリロードして表示しなおしてください。</li>
</ul>


<h4>サイトの閉鎖・移動の際の注意事項</h4>
<p><font color="#F00000">※レンタルサーバでご利用の場合は、必ずご確認下さい。</font></p>
<p>ファイルマネージャーでファイルのアップロードやフォルダを作成した場合、フォルダ・ファイルの所有権がシステム側になりFTPなどで削除出来なくなる場合があります。</p>
<p>一度、ファイルをアップロードして、FTPソフトで削除可能かどうかを確認しておくことをオススメします。FTPソフトで削除出来ない場合は、必ずファイルマネージャーから削除を行って下さい。</p>

<h4>サポートについて</h4>
<ul>
  <li>サポートはメールで行います。サポート用のサイトは準備中です。</li>
  <li>日本語・英語のみ受付可能ですが、簡単な英語であれば答えることが可能です。</li>
</ul>

<h4>使用ライブラリとライセンス</h4>

<p>ファイルマネージャー本体のライセンスは、<a href='http://www.gnu.org/licenses/gpl.html'>GPL</a>の予定です。</p>

<p>
<font color="#F00000">ファイルマネージャーは、以下のライブラリを利用しています。各ライブラリによってライセンスが異なりますから、必ずご確認ください。ライセンス違反による不正利用に関する問題について作者は関知いたしません。</font>
</p>
<ul>
  <li>SWFUpload<br /><a href='http://swfupload.org/'>SWFUpload</a>をファイルのアップロードに使用<br />ライセンス：<a href='http://www.opensource.org/licenses/mit-license.php'>MIT License</a></li>
  <li>jQuery<br /><a href='http://jquery.com/'>prettyPhoto</a>をファイルのビューワーに使用<br />
  ライセンス：<a href=http://docs.jquery.com/License'>MIT と GPL</a></li>
  <li>prettyPhoto<br /><a href='http://www.no-margin-for-errors.com/projects/prettyPhoto-jquery-lightbox-clone/'>prettyPhoto</a>をファイルのビューワーに使用<br />
  ライセンス：<a href='http://creativecommons.org/licenses/by/2.5/'>Creative Commons Attribution 2.5</a></li>
  <li>Flowplayer <br /><a href='http://flowplayer.org/'>Flowplayer</a>をFLVファイルのビューワーに使用<br />
  ライセンス：<a href='http://flowplayer.org/download/license_gpl.html'>GPL 3</a><br />
  </li>
</ul>

<h4>参考URL</h4>
<p>モジュールを作成するにあたり以下のサイトを参考にしました。</p>
<ul>
  <li><a href='http://swfupload.org/'>http://swfupload.org/</a></li>
  <li><a href='http://code.google.com/p/swfupload/'>http://code.google.com/p/swfupload/</a></li>
  <li><a href='http://drupal.org/node/287776'>http://drupal.org/node/287776</a></li>
  <li><a href='http://youmos.com/reference/swfupload_setup.html'>http://youmos.com/reference/swfupload_setup.html</a> (日本語)</li>
</ul>

<h4>変更履歴</h4>
<ul>
  <li>0.8<br />ベータ版の完成</li>
  <li>0.9<br />
  ファイルへのアクセス権により、操作などの表示を切り替えるようにした。<br />
  ffmpegによる操作を組み込んで、サーバサイドで動画の扱いが可能にした。<br />
  </li>
  <li>0.95<br />
  フォルダ選択のUIを変更して分かりやすくした。<br />
  ファイルアップロードのリンク方法を変更して、使いやすくした。<br />
  タブメニューシステムを廃止した。<br />
  </li>
  <li>0.96<br />
  SWFUploadとJW FLV Playerの設置をcommonへ設置したものを使うように変更した。<br />
  </li>
  <li>0.97<br />
  JW FLV PlayerとlightviewをFlowplayerとprettyPhotoに変更して、ライセンスを合わせた。<br />
  利用している画像を変更し、画面デザインを少し変更した。<br />
  SWFUploadを使う場合に、アップロード画面が表示される都度、新しいセッションを発行する方式へ変更した。<br />
  使用しているライブラリのファイルチェック機能を追加した。<br />
  </li>
  <li>0.98<br />
  SWFUploadのパスへ設置するhtaccessのサンプルを作成するようにした。<br />
  トークン用のデータベースを追加を追加した。0.98以下のバージョンの人はアップデートが必要です。<br />
  アップロードのチェックに独自にSQL側にトークンを保存して、アップロード時の不正アクセスを防止するようにした。<br />
  </li>
</ul>

<h4>連絡先</h4>
<p>モジュールに関する連絡先</p>
<ul>
  <li>メール<br />hiro1173.seike@gmail.com</li>
  <li>ウェブサイト<br />http://beabo.net<br />http://beabo.dip.jp<br />http://code.google.com/p/hiro1173/</li>
</ul>
